<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Animal Crossing Style - Simulação Final (com Debug)</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap');

/* Seu CSS original */
body {
    background-color: #79C2D2;
    font-family: 'Baloo 2', cursive;
    color: #fff;
    height: 100vh;
    overflow: hidden;
    position: relative;
}
#chat-container {
    position: fixed;
    bottom: 0;
    left: 0;
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 500px;
    width: 100%;
    padding: 20px;
}
/* (restante do seu CSS igual ao que enviou antes) */
</style>
</head>
<body>
<div id="chat-container"></div>

<script>
console.log("[DEBUG] Script de chat iniciado");

const chatContainer = document.getElementById('chat-container');
if(chatContainer){
  console.log("[DEBUG] Elemento #chat-container encontrado");
}else{
  console.error("[ERRO] Elemento #chat-container NÃO encontrado!");
}

/* URL do coração usado como secondary no Super Chat */
const HEART_URL = 'https://dodo.ac/np/images/thumb/3/3c/Heart_Crystal_NH_Inv_Icon.png/120px-Heart_Crystal_NH_Inv_Icon.png';

const messagesToSimulate = [
    { user: 'Alice', role: 'moderator', avatarUrl: 'https://i.pravatar.cc/70?img=1', secondaryIconUrl: 'https://dodo.ac/np/images/thumb/a/a9/Golden_Net_NH_Inv_Icon.png/120px-Golden_Net_NH_Inv_Icon.png', text: 'Bem-vindos à live!' },
    { user: 'Bob', role: 'member', avatarUrl: 'https://i.pravatar.cc/70?img=2', secondaryIconUrl: 'https://dodo.ac/np/images/thumb/a/a2/100_Bells_NH_Inv_Icon.png/120px-100_Bells_NH_Inv_Icon.png', text: 'Sou membro do canal' },
    { user: 'Carol', role: 'founder', avatarUrl: 'https://i.pravatar.cc/70?img=3', secondaryIconUrl: 'https://dodo.ac/np/images/thumb/d/dd/Gold_Roses_NH_Inv_Icon.png/120px-Gold_Roses_NH_Inv_Icon.png', text: 'Essa animação está incrível!' },
    { user: 'Dave', role: 'viewer', avatarUrl: 'https://i.pravatar.cc/70?img=4', text: 'Super Chat: Valeu pela live!', secondaryIconUrl: HEART_URL },
    { user: 'Eve', role: 'viewer', avatarUrl: 'https://i.pravatar.cc/70?img=5', secondaryIconUrl: HEART_URL, text: 'Cheer: 1000 bits!', isCheer: true, isSuperChat: true }
];

let messageIndex = 0;

function createMessageElement(messageData) {
    console.log(`[DEBUG] Criando mensagem para ${messageData.user} (role: ${messageData.role})`);
    const messageElement = document.createElement('div');
    messageElement.classList.add('chat-message', messageData.role);

    const isSuperChat = !!(messageData.text && messageData.text.toLowerCase().includes('super chat'));
    const isCheer = !!messageData.isCheer;

    if (isSuperChat) {
        messageElement.classList.add('superchat');
        console.log(`[DEBUG] Mensagem de ${messageData.user} marcada como SUPERCHAT`);
        messageData.secondaryIconUrl = HEART_URL;
    }
    if (isCheer) {
        messageElement.classList.add('cheer');
        console.log(`[DEBUG] Mensagem de ${messageData.user} marcada como CHEER`);
    }

    const avatarGroup = document.createElement('div');
    avatarGroup.classList.add('avatar-icon-group');

    const avatarDiv = document.createElement('div');
    avatarDiv.classList.add('chat-avatar');
    const avatarImg = document.createElement('img');
    avatarImg.src = messageData.avatarUrl;
    avatarImg.onload = () => console.log(`[DEBUG] Avatar carregado para ${messageData.user}`);
    avatarImg.onerror = () => console.error(`[ERRO] Falha ao carregar avatar de ${messageData.user}`);
    avatarDiv.appendChild(avatarImg);
    avatarGroup.appendChild(avatarDiv);

    if (messageData.secondaryIconUrl) {
        const secDiv = document.createElement('div');
        secDiv.classList.add('secondary-icon');
        const secImg = document.createElement('img');
        secImg.src = messageData.secondaryIconUrl;
        secImg.onload = () => console.log(`[DEBUG] Secondary icon carregado para ${messageData.user}`);
        secImg.onerror = () => console.error(`[ERRO] Falha ao carregar secondary icon de ${messageData.user}`);
        secDiv.appendChild(secImg);
        avatarGroup.appendChild(secDiv);
    }

    messageElement.appendChild(avatarGroup);

    const messageGroup = document.createElement('div');
    messageGroup.classList.add('message-group');

    const usernameContainer = document.createElement('div');
    usernameContainer.classList.add('username-container');
    const usernameSpan = document.createElement('span');
    usernameSpan.classList.add('username');
    usernameSpan.textContent = messageData.user;
    usernameContainer.appendChild(usernameSpan);
    messageGroup.appendChild(usernameContainer);

    const bubble = document.createElement('div');
    bubble.classList.add('message-bubble');
    bubble.textContent = messageData.text;

    if (isCheer) {
        const cheerIcon = document.createElement('img');
        cheerIcon.classList.add('cheer-icon');
        cheerIcon.src = 'https://dodo.ac/np/images/thumb/d/d2/30%2C000_Bells_NH_Inv_Icon.png/120px-30%2C000_Bells_NH_Inv_Icon.png';
        bubble.appendChild(cheerIcon);
    }
    if (isSuperChat) {
        const superIcon = document.createElement('img');
        superIcon.classList.add('superchat-icon');
        superIcon.src = 'https://dodo.ac/np/images/thumb/d/d2/30%2C000_Bells_NH_Inv_Icon.png/120px-30%2C000_Bells_NH_Inv_Icon.png';
        bubble.appendChild(superIcon);
    }

    messageGroup.appendChild(bubble);
    messageElement.appendChild(messageGroup);

    return messageElement;
}

function simulateMessage() {
    const message = messagesToSimulate[messageIndex];
    console.log(`[DEBUG] Simulando mensagem ${messageIndex+1}/${messagesToSimulate.length} - Usuário: ${message.user}`);
    const el = createMessageElement(message);
    chatContainer.appendChild(el);
    messageIndex = (messageIndex + 1) % messagesToSimulate.length;

    if (chatContainer.childElementCount > 5) {
        chatContainer.removeChild(chatContainer.firstChild);
        console.log("[DEBUG] Removida mensagem antiga para manter até 5 no chat");
    }
}

setInterval(simulateMessage, 3000);
</script>
</body>
</html>
